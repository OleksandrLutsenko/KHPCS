<div class="contract-editor clearfix" layout="row" flex="100">
    <div flex="15">

        <div class="surveys-title" layout="" layout-align="center center">
            <span class="title-size">Survey</span>
        </div>

        <div>
            <div class="search" layout="row" layout-align="center center">
                <md-input-container flex="100">
                    <label layout="row">
                        <i class="material-icons">search</i>
                        <p layout="row" layout-align="none end">Search</p>
                    </label>
                    <input type="text" ng-model="vm.searchSurvey.name">
                </md-input-container>
            </div>

            <div ng-repeat="survey in vm.surveys | filter: vm.searchSurvey" ng-if="(survey.status === 1 || survey.status === 2)"
                 ng-click="vm.setActiveSurvey(survey.id, $index, survey.name)" class="questionnaire-list">

                <p class="hidden-text pointer" title={{survey.name}}>
                    <i class="material-icons chevron" ng-if="vm.showSelectedSurvey(survey.id)">chevron_right</i>
                    {{survey.name}}
                </p>

            </div>
        </div>

        <div ng-if="!vm.surveys.length">
            <p class="empty-block">
                No surveys
            </p>
        </div>

    </div>

    <div flex="60">
        <textarea name="CKeditorArea"></textarea>
    </div>

    <!--TemplateTab-->

    <div flex="25" class="edit-template" ng-show="vm.showTemplateTab">
        <div flex="100" layout="row" >
            <div flex="33" layout="" layout-align="center center" class="header-cell active-cell">
                <span class="header-title">
                    Templates
                </span>
            </div>

            <div flex="33" layout="" layout-align="center center" class="header-cell inactive-cell pointer"
                 ng-click="vm.clickSurveyVarTab()">
                <span class="header-title">
                    Survey variables
                </span>
            </div>

            <div flex="33" layout="" layout-align="center center" class="header-cell inactive-cell pointer"
                 ng-click="vm.clickUserVarTab()">
                <span class="header-title">
                    User variables
                </span>
            </div>
        </div>

        <div>
            <div>
                <div class="search" layout="row" layout-align="center center">
                    <md-input-container flex="100">
                        <label layout="row">
                            <i class="material-icons">search</i>
                            <p layout="row" layout-align="none end">Search</p>
                        </label>
                        <input type="text" ng-model="vm.searchTemplate.title">
                    </md-input-container>
                </div>

                <div class="save-menu pointer" ng-if="vm.surveys.length" layout="" layout-align="space-between center">
                    <div layout="" layout-align="start center" ng-click="vm.conditionForCreatingNewTemplate()">
                        <i class="material-icons">add</i>
                        <span> Add new template</span>
                    </div>

                    <div layout="" layout-align="end center">
                        <i class="material-icons" ng-if="vm.activeTemplateId === undefined"
                           ng-click="vm.postTemplate()">save</i>

                        <i class="material-icons" ng-if="vm.activeTemplateId !== undefined"
                           ng-click="vm.updateTemplate()">save</i>

                        <i class="material-icons" ng-if="vm.activeTemplateId !== undefined"
                           ng-click="vm.removeTemplate()">delete_forever</i>
                    </div>
                </div>
            </div>

            <div ng-repeat="template in vm.templates | filter: vm.searchTemplate">
                <p ng-click="vm.pasteTemplate(template)" ng-if="vm.showTemplates(template.survey_id)"
                   class="templates hidden-text pointer">
                    <i class="material-icons chevron" ng-if="vm.showSelectedTemplate(template.id)">chevron_right</i>
                    {{template.title}}
                </p>
            </div>
        </div>
    </div>

    <!--SurveyTab-->

    <div flex="25" class="edit-template" ng-show="vm.showSurveyVarTab">
        <div flex="100" layout="row" >
            <div flex="33" layout="" layout-align="center center" class="header-cell inactive-cell pointer"
                 ng-click="vm.clickTemplateTab()">
                <span class="header-title">
                    Templates
                </span>
            </div>

            <div flex="33" layout="" layout-align="center center" class="header-cell active-cell">
                <span class="header-title">
                    Survey variables
                </span>
            </div>

            <div flex="33" layout="" layout-align="center center" class="header-cell inactive-cell pointer"
                 ng-click="vm.clickUserVarTab()">
                <span class="header-title">
                    User variables
                </span>
            </div>
        </div>

        <div>
            <p ng-if="!vm.activeSurvey.blocks.length" class="empty-block">
                No data
            </p>

            <div ng-repeat="block in vm.activeSurvey.blocks">
                <p ng-click="vm.showQuestionsInBlock(block.id)" class="survey-block pointer">
                    {{block.name}}
                </p>

                <div ng-repeat="question in block.questions" ng-if="vm.showQuestions(block.id)"
                     class="survey-block-border">
                    <p ng-click="vm.pasteTitle(question.title)" class="survey-question pointer hidden-text"
                       title={{question.title}}>
                        {{question.title}}
                    </p>

                    <p ng-click="vm.pasteVariability(question.title, question.id)" class="survey-question answer pointer">
                        [Answer {{question.id}}]
                    </p>
                </div>

                <div class="empty-block" ng-if="vm.showQuestions(block.id)">
                    <p ng-if="!block.questions.length">
                        Empty block
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!--UserTab-->

    <div flex="25" class="edit-template" ng-if="vm.showUserVarTab">
        <div flex="100" layout="row" >
            <div flex="33" layout="" layout-align="center center" class="header-cell inactive-cell pointer"
                 ng-click="vm.clickTemplateTab()">
                <span class="header-title">
                    Templates
                </span>
            </div>

            <div flex="33" layout="" layout-align="center center" class="header-cell inactive-cell pointer"
                 ng-click="vm.clickSurveyVarTab()">
                <span class="header-title">
                    Survey variables
                </span>
            </div>

            <div flex="33" layout="" layout-align="center center" class="header-cell active-cell">
                <span class="header-title">
                    User variables
                </span>
            </div>
        </div>

        <div flex="100">
            <div class="search" layout="row" layout-align="center center">
                <md-input-container flex="100">
                    <label layout="row">
                        <i class="material-icons">search</i>
                        <p layout="row" layout-align="none end">Search</p>
                    </label>
                    <input type="text" ng-model="vm.searchUserVar.text">
                </md-input-container>
            </div>

            <div class="user-var-create pointer" layout="" layout-align="start center" ng-click="vm.createUserVariability()">
                <i class="material-icons">add</i>
                <p >Create variable</p>
            </div>

            <div ng-repeat="var in vm.variability  | filter: vm.searchUserVar" class="user-var" flex="100"
                 ng-if="var.deleted_at === null" >
                <div layout="row" layout-align="space-between center">
                    <div>
                        <p ng-click="vm.pasteUserVariability(var.id)" title={{var.text}} class="pointer">
                            {{var.text}}
                        </p>
                    </div>

                    <div class="user-edit">
                        <i class="material-icons" ng-click="vm.editUserVariability(var.id, var.text)">mode_edit</i>
                        <i class="material-icons" ng-click="vm.removeUserVariability(var.id)">highlight_off</i>
                    </div>
                </div>
            </div>

            <div>
                <p ng-if="!vm.variability.length" class="empty-block">
                    No variables
                </p>
            </div>
        </div>
    </div>
</div>