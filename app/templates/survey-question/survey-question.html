<md-content class="quest" md-theme="blue-grey">

    <md-tabs md-dynamic-height md-border-bottom md-selected="selectedIndex">
        <md-tab label="Question's"></md-tab>
        <md-tab label="Example"></md-tab>
    </md-tabs>

    <section ng-if="selectedIndex === 0">
        <md-content class="md-padding">
            <div class="question-heder" layout="row">
                <div flex="10" layout="row" layout-align="center center">
                    <div ng-click="vm.toggleLeft()" layout="row" layout-align="center center" hide-gt-md="">
                        <i class="material-icons">menu</i>
                    </div>
                </div>
                <div flex="80" layout="row" layout-align="space-between center">
                    <div class="name-block">
                        <h3>{{vm.nameBlock}}</h3>
                    </div>
                    <div>
                        <div ng-show="vm.edit">
                            <md-button class="edit-button" ng-click="vm.editButton()">
                                Edit section
                            </md-button>
                        </div>
                        <div ng-show="!vm.edit" layout="row" layout-align="center center">

                            <div>
                                <md-button ng-click="vm.showEdit()">
                                    Add question
                                </md-button>
                            </div>

                            <md-button class="edit-button" ng-class="{'edit-button-active': !vm.drag}"
                                       ng-click="vm.editButton()">
                                Drag and drop mode
                            </md-button>

                            <!--<div>-->
                            <!--<md-button class="cancel-button" ng-click="vm.cancel()">-->
                            <!--Cancel-->
                            <!--</md-button>-->
                            <!--</div>-->
                            <!--<div>-->
                            <!--<md-button class="save-button md-primary" ng-click="vm.save()">-->
                            <!--Save-->
                            <!--</md-button>-->
                            <!--</div>-->
                        </div>
                    </div>
                </div>

            </div>
            <div layout="row" layout-align="center center">
                <div flex="80">

                    <div ui-sortable="vm.sortableOptionsQuestion" ng-model="vm.items" class="question-container">
                        <div ng-repeat="(mainKey, question) in  vm.items" class="question_block"
                             ng-if="!question.delete"
                             layout="row">
                            <div class="couter">
                                Question {{mainKey + 1}}
                            </div>
                            <div flex="">
                                <div class="main_question" layout="row" layout-align="space-between center">

                                    <div class="main_content">
                                        {{question.title}}
                                    </div>

                                    <div layout="row">
                                        <div>
                                            {{question.identifier}}
                                        </div>
                                        <div class="icons" ng-show="!vm.edit" layout="row">
                                            <md-checkbox class="md-primary"
                                                         ng-model="question.mandatory"
                                                         ng-click="vm.mandatoryCheck(question)"
                                                         ng-checked="vm.mandatoryChecked(question)"
                                                         ng-if="question.type !== 1" aria-label="1">
                                            </md-checkbox>
                                            <md-icon ng-click="vm.showEdit(mainKey)"
                                                     md-svg-src="content/icons/icon_edit.svg"
                                                     aria-label="android "></md-icon>
                                            <md-icon ng-click="vm.deleteQuest(question.id, mainKey)"
                                                     md-svg-src="content/icons/icon_delete.svg"
                                                     aria-label="android "></md-icon>
                                        </div>
                                    </div>

                                </div>
                                <div>
                                    <md-input-container ng-if="question.type !== 1 " class="next-input">
                                        <label>Next question: {{question.next_question}}
                                            <p ng-if="question.next_question === null">undefined</p>
                                        </label>

                                        <md-select class="md-block-restyle" ng-model="under"
                                                   aria-label="">
                                            <md-option ng-value="null" ng-click="vm.changeNextQuest(question)">
                                                undefined
                                            </md-option>
                                            <md-option ng-repeat="quest in  vm.items"
                                                       ng-click="vm.changeNextQuest(question, quest)"
                                                       ng-value="quest.title"
                                                       ng-if="quest.id !== question.id"
                                            >
                                                {{quest.title}}
                                            </md-option>

                                        </md-select>
                                    </md-input-container>
                                    <div ui-sortable="vm.sortableOptionAnswer" ng-model="question.answers"
                                         class="answer-container" ng-if="question.type == 1 || question.type == 0">
                                        <div ng-repeat="(answerKey, answers) in  question.answers" class="answer-block"
                                             ng-if="!answers.delete">

                                            <div layout="row" flex="" class="answeText">

                                                <i class="material-icons" ng-if="question.type == 0">check</i>
                                                <i class="material-icons md-36" ng-if="question.type == 1">radio_button_unchecked</i>

                                                {{answers.answer_text}}
                                            </div>
                                            <md-input-container ng-if="question.type === 1" class="next-input">
                                                <label>Next question: {{answers.next_question}}
                                                    <!--<p ng-if="question.next_question === null">undefined</p>-->
                                                </label>
                                                <md-select class="md-block-restyle" ng-model="under"
                                                           aria-label="Financial advisor">
                                                    <md-option ng-value="null" ng-click="vm.changeNextQuest(question , quest , answers)">
                                                        undefined
                                                    </md-option>
                                                    <md-option ng-repeat="quest in  vm.items"
                                                               ng-click="vm.changeNextQuest(question, quest , answers)"
                                                               ng-value="quest.title"
                                                    ng-if="question.id !== quest.id">
                                                        {{quest.title}}
                                                    </md-option>
                                                </md-select>
                                            </md-input-container>
                                            <!--<div layout="row" layout-align="end center" ng-if="question.type == 1">-->
                                            <!--<div ui-sortable="vm.sortableOptionsQuestionInAnswer"-->
                                            <!--ng-model="answers.child_questions" class="question-container"-->
                                            <!--ng-class="{'question-container-drop': vm.childDraging}" flex="90">-->
                                            <!--<div ng-repeat="(questionKey, child_questions) in answers.child_questions"-->
                                            <!--ng-if="!child_questions.delete">-->
                                            <!--<div class="child_question"-->
                                            <!--ng-class="{'child_question_last': $last && child_questions.type == 2}"-->
                                            <!--layout="row" layout-align="space-between center">-->

                                            <!--<div>-->
                                            <!--{{child_questions.title}}-->
                                            <!--</div>-->

                                            <!--<div layout="row">-->
                                            <!--<div>-->
                                            <!--{{child_questions.identifier}}-->
                                            <!--</div>-->

                                            <!--<div class="icons" ng-show="!vm.edit" layout="row">-->
                                            <!--<md-icon-->
                                            <!--ng-click="vm.showEdit(mainKey, answerKey, questionKey)"-->
                                            <!--md-svg-src="content/icons/icon_edit.svg"-->
                                            <!--aria-label="android "></md-icon>-->
                                            <!--<md-icon-->
                                            <!--ng-click="vm.deleteQuest(child_questions.id, mainKey, answerKey, questionKey)"-->
                                            <!--md-svg-src="content/icons/icon_delete.svg"-->
                                            <!--aria-label="android "></md-icon>-->
                                            <!--</div>-->
                                            <!--</div>-->

                                            <!--</div>-->
                                            <!--<div>-->
                                            <!--<div ui-sortable="vm.sortableOptionChildAnswer"-->
                                            <!--ng-model="child_questions.answers"-->
                                            <!--class="child-answer-container"-->
                                            <!--ng-if="child_questions.type == 1 || child_questions.type == 0">-->
                                            <!--<div ng-repeat="childAnswers in  child_questions.answers"-->
                                            <!--class="answer-block child-answer"-->
                                            <!--ng-if="!childAnswers.delete">-->

                                            <!--<div layout="row" flex="" class="answeText">-->

                                            <!--<i class="material-icons"-->
                                            <!--ng-if="child_questions.type == 0">check</i>-->
                                            <!--<i class="material-icons md-36"-->
                                            <!--ng-if="child_questions.type == 1">radio_button_unchecked</i>-->

                                            <!--{{childAnswers.answer_text}}-->

                                            <!--</div>-->
                                            <!--</div>-->
                                            <!--</div>-->
                                            <!--</div>-->
                                            <!--</div>-->
                                            <!--</div>-->
                                            <!--</div>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </md-content>
    </section>

    <section ng-if="selectedIndex === 1">

        <md-content class="md-padding">
            <p layout="row" layout-align="center center">Tree example</p>
            <div ng-repeat="question in vm.chain" style="margin: 10px">

                <div ng-if="question.type !== 1">
                    <p>{{question.title}}</p>
                </div>

                <div ng-if="question.type === 1">
                    <p>{{question.title}}</p>
                    <md-radio-group>
                        <div ng-repeat="radio in question.answers" style="margin-left: 10px">
                            <md-radio-button value={{radio.answer_text}} class="md-primary pointer"
                                             ng-click="vm.checkRadioTreeExample(radio, question.identifier)">
                                {{radio.answer_text}}
                            </md-radio-button>
                        </div>
                    </md-radio-group>
                </div>

            </div>
            <div ng-if="vm.endOfChain">
                <h4>End of questions</h4>
            </div>
        </md-content>
    </section>


</md-content>



