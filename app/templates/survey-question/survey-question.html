<md-content class="quest">

    <div>
            <div class="main_question">
                <span ng-click="vm.showEdit()">Add new question</span>
                <md-button ng-click="vm.save()">Save</md-button>
            </div>


            <div ui-sortable="vm.sortableOptionsQuestion" ng-model="vm.items" class="question-container">
                <div ng-repeat="(mainKey, question) in  vm.items" class="question_block" ng-if="!question.delete">
                    <div class="main_question" layout="row" layout-align="space-between center">

                        <div class="main_content">
                            {{question.title}}
                        </div>

                        <div>
                            <i class="material-icons" ng-click="vm.showEdit(mainKey)">mode_edit</i>
                            <i class="material-icons" ng-click="vm.deleteQuest(question.id, mainKey)">highlight_off</i>
                        </div>

                    </div>
                    <div>
                        <div ui-sortable="vm.sortableOptionAnswer" ng-model="question.answers" class="answer-container" ng-if="question.type == 1">
                            <div ng-repeat="(answerKey, answers) in  question.answers" class="answer_block" ng-if="!answers.delete">

                                    <div layout="row">

                                        <div flex="40">
                                            {{answers.answer_text}}
                                        </div>

                                        <div ui-sortable="vm.sortableOptionsQuestionInAnswer" ng-model="answers.child_questions" class="question-container" flex="60">
                                            <div ng-repeat="(questionKey, child_questions) in answers.child_questions" ng-if="!child_questions.delete">
                                                <div class="question_in_answer" layout="row" layout-align="space-between center">

                                                    <div>
                                                        {{child_questions.title}}
                                                    </div>

                                                    <div class="sm-right">
                                                        <i class="material-icons" ng-click="vm.showEdit(mainKey, answerKey, questionKey)">mode_edit</i>
                                                        <i class="material-icons" ng-click="vm.deleteQuest(child_questions.id, mainKey, answerKey, questionKey)">highlight_off</i>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>



                            </div>
                        </div>
                    </div>
                </div>
            </div>


    </div>

</md-content>



