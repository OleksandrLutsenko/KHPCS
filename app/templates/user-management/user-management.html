<div class="um-main">
    <md-content class="md-padding" flex="100" layout="column" layout-align="center center">
        <div class="search" layout="row" layout-align="center center">
            <md-input-container flex="100">
                <label layout="row">
                    <i class="material-icons">search</i>
                    <p layout="row" layout-align="none end">Search</p></label>
                <input type="text" ng-model="vm.search">
            </md-input-container>

            <div class="add-icon" layout="" layout-align="center center" ng-click="vm.createOrUpdate()">
                <i class="material-icons">person_add</i>
            </div>
        </div>
        <div class="table" ng-if="vm.customers.length > 0">
            <md-card>
                <md-table-container>
                    <table md-table>
                        <thead md-head>
                        <tr md-row>
                            <th md-column>Client Name</th>
                            <th md-column>Client Classification</th>
                            <th md-column ng-if="vm.user.role_id > 1">Financial Adviser</th>
                            <th md-column>Questionnaire Responses</th>
                            <th md-column>Contract</th>
                            <th md-column>Date Completed</th>
                            <th md-column></th>
                        </tr>
                        </thead>
                        <tbody md-body>
                        <tr md-row
                            ng-repeat="customers in vm.customers | filter: vm.search | limitTo: vm.myLimit: (vm.myPage - 1) * vm.myLimit">
                            <td md-cell>{{customers.name + ' ' + customers.surname}}</td>
                            <td md-cell>{{customers.classification}}</td>
                            <td md-cell ng-if="vm.user.role_id > 1">{{customers.user_name }}</td>
                            <td md-cell>
                                <md-button class="md-raised md-primary" ng-click="vm.pass(customers.id)"
                                           ng-if="!customers.reports.length">
                                    Get started
                                </md-button>
                                <md-button class="md-raised" ng-click="vm.pass(customers.id)"
                                           ng-if="">
                                    Continue
                                </md-button>
                                <md-button class="md-primary"
                                          ng-disabled="true" ng-if="customers.reports.length">
                                    Completed
                                </md-button>
                            </td>

                            </md-button>
                            <td md-cell ng-if="customers.reports.length"><i class="material-icons" ng-click="vm.downloadPDF(customers)">file_download</i></td>
                            <td md-cell ng-if="!customers.reports.length"><i class="material-icons restyle-cursor">do_not_disturb_alt</i></td>
                            <td md-cell>
                                {{customers.created_at }}
                            </td>
                            <td md-cell>
                                <i class="material-icons"
                                   ng-click="vm.createOrUpdate(customers.id, customers)">mode_edit</i>
                                <i class="material-icons"
                                   ng-click="vm.deleteCustomer(customers.id, $index)">highlight_off</i>
                            </td>
                        </tr>

                        </tbody>
                    </table>
                </md-table-container>
                <md-table-pagination md-limit="vm.myLimit" md-limit-options="[10, 25, 50, 100]" md-page="vm.myPage"
                                     md-total="{{vm.customers.length}}" md-page-select>
                </md-table-pagination>
            </md-card>

        </div>
    </md-content>
</div>

